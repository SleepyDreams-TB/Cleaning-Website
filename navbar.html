<nav class="bg-black shadow p-4 flex justify-between items-center">
  <div>
    <a id="username"></a>
    <a href="/index.html" class="mr-4 text-pink-600 hover:underline">Home</a>
    <a href="/services.html" class="mr-4 text-pink-600 hover:underline">Services</a>
    <a href="/About-Us.html" class="mr-4 text-pink-600 hover:underline">About Us</a>
    <a href="/ContactUs.html" class="mr-4 text-pink-600 hover:underline">Contact</a>
    <a href="/products/productsPage.html" class="mr-4 text-pink-600 hover:underline">Products</a>
    <a href="/products/cart.html" class="mr-4 text-pink-600 hover:underline">Cart</a>
  </div>
</nav>
<script>
  const token = localStorage.getItem("jwt"); // JWT stored after login
  if (token) {
    fetch("http://api.kingburger.site/dashboard", {
      headers: {
        "Authorization": `Bearer ${token}`
      }
    })
      .then(res => res.json())
      .then(data => {
        document.getElementById("username").innerText = data.loggedIn_User;

        if (data.token) {
          localStorage.setItem("jwt", data.token); // update token for sliding expiration
        }
      })
      .catch(err => {
        console.log("User not logged in or token expired", err);
        document.getElementById("username").innerHTML = '(<a href="/login.html" class="text-pink-600 hover:underline">Login</a>)';
      });
  } else {
    document.getElementById("username").innerText = "Guest";
  }

</script>