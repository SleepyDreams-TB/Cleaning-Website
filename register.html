<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Register - Burger Site</title>
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
<style>
    body {
        background: linear-gradient(135deg, #ffb6d9, #ff6399);
        font-family: 'Nunito', sans-serif;
        min-height: 100vh;
        display: flex;
        align-items: center;
        justify-content: center;
    }
    .card { border-radius: 1.5rem; overflow: hidden; max-width: 900px; box-shadow: 0 10px 30px rgba(0,0,0,0.2); }
    .bg-register-image { background-size: cover; background-position: center; }
    input.form-control { border-radius: 2rem; padding: 0.75rem 1rem; border: 2px solid #ff4d8a; margin-bottom: 1rem; }
    input.form-control:focus { border-color: #ff1f6b; box-shadow: 0 0 0 0.25rem rgba(255,31,107,0.25); }
    .btn-user { border-radius: 2rem; background-color: #ff4d8a; color: white; font-weight: 600; padding: 0.75rem; width: 100%; margin-top: 0.5rem; transition: 0.3s; }
    .btn-user:hover { background-color: #ff1f6b; }
    a.text-pink { color: white; font-weight: 600; text-decoration: none; }
    a.text-pink:hover { color: #ff1f6b; }
    .alert { border-radius: 1rem; }
</style>
</head>
<body>
<div class="container">
    <div class="card shadow-lg my-5 mx-auto">
        <div class="row g-0">
            <div class="col-lg-5 d-none d-lg-block">
                <div class="bg-register-image" style="height:100%; background-image: url('https://picsum.photos/400/600?pink');"></div>
            </div>
            <div class="col-lg-7">
                <div class="p-5">
                    <div class="text-center mb-4">
                        <h4 class="fw-bold" style="color:#ff1f6b;">Create an Account!</h4>
                    </div>

                    <div id="alert-container"></div>

                    <form id="registerForm">
                        <input class="form-control" type="text" name="firstName" placeholder="First Name" required>
                        <input class="form-control" type="text" name="lastName" placeholder="Last Name" required>
                        <input class="form-control" type="text" name="userName" placeholder="Username" required>
                        <input class="form-control" type="email" name="email" placeholder="Email" required>
                        <input class="form-control" type="password" name="password" placeholder="Password" required>
                        <input class="form-control" type="text" name="cellNum" placeholder="Phone (optional)">
                        <button type="submit" class="btn-user">Register</button>
                    </form>

                    <div class="text-center mt-3">
                        <a href="login.html" style="color:#ff1f6b;">Already have an account? Login!</a>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<script>
const form = document.getElementById('registerForm');
const alertContainer = document.getElementById('alert-container');

form.addEventListener('submit', async (e) => {
    e.preventDefault();

    const formData = new FormData(form);
    const data = Object.fromEntries(formData.entries());

    try {
        const res = await fetch('https://api.kingburger.site/register/', {
            method: 'POST',
            body: new URLSearchParams(data)
        });
        const result = await res.json();

        alertContainer.innerHTML = '';
        if (result.message) {
            // Success â†’ redirect to homepage
            window.location.href = 'index.html';
        } else {
            // Show error
            const div = document.createElement('div');
            div.className = 'alert alert-danger';
            div.textContent = result.error || 'Something went wrong';
            alertContainer.appendChild(div);
        }
    } catch (err) {
        alertContainer.innerHTML = '<div class="alert alert-danger">Network error. Try again.</div>';
    }
});
</script>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>
